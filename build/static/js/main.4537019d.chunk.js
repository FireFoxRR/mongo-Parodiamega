(this["webpackJsonpreact-firestore-crud"]=this["webpackJsonpreact-firestore-crud"]||[]).push([[0],{82:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a(44),i=a.n(s),r=a(17),c=a(3),o=a(7),l=a(8),u=a(15),d=a(14),h=(a(32),a(1));function j(){return Object(h.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(h.jsx)("a",{href:"/tutorials",className:"navbar-brand",children:"Parodia-Mega"}),Object(h.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(r.b,{to:"/tutorials",className:"nav-link",children:"Mis archivos"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(r.b,{to:"/add",className:"nav-link",children:"Subir archivos"})})]})]})}var b=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(j,{}),Object(h.jsx)("div",{className:"container mt-3",children:Object(h.jsx)("h2",{children:"Bienvenido a Mega-Parodia :D"})})]})}}]),a}(n.Component),m=Object(c.f)(b),p=a(4),f=a(23),O=a.n(f),g=new(function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,[{key:"getSetup",value:function(){return O.a.get("https://mega-parodia.herokuapp.com/setup")}},{key:"signin",value:function(e){return console.log(e),O.a.post("https://mega-parodia.herokuapp.com/api/login",e)}}]),e}()),v=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).login=function(e){e.preventDefault(),sessionStorage.removeItem("author");var t={name:n.state.username,password:n.state.password};console.log("login data => "+JSON.stringify(t)),sessionStorage.setItem("author",n.state.username),""===n.state.id&&g.signin(t).then((function(e){console.log(e.data),sessionStorage.setItem("token",e.data.token),sessionStorage.setItem("tokenVal",!0),e.data.token&&(window.location.href="/home")}))},n.setup=function(e){e.preventDefault(),sessionStorage.removeItem("author"),sessionStorage.setItem("author","anonimo"),""===n.state.id&&g.getSetup().then((function(e){console.log(e.data),sessionStorage.setItem("token",e.data.token),sessionStorage.setItem("tokenVal",!0),window.location.href="/comments"}))},n.changepasswordHandler=function(e){n.setState({password:e.target.value})},n.changeUsernameHandler=function(e){n.setState({username:e.target.value})},n.state={id:"",password:"",username:""},n.changepasswordHandler=n.changepasswordHandler.bind(Object(p.a)(n)),n.login=n.login.bind(Object(p.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"cancel",value:function(){this.props.history.push("/employees")}},{key:"getTitle",value:function(){return""===this.state.id?Object(h.jsx)("h3",{className:"text-center",children:"Login"}):Object(h.jsx)("h3",{className:"text-center",children:"Login Employee"})}},{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)("br",{}),Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"card col-md-6 offset-md-3 offset-md-3",children:[this.getTitle(),Object(h.jsx)("div",{className:"card-body",children:Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:" Username: "}),Object(h.jsx)("input",{placeholder:"Username",name:"username",className:"form-control",value:this.state.username,onChange:this.changeUsernameHandler})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:" Password : "}),Object(h.jsx)("input",{placeholder:"Password ",name:"password",className:"form-control",value:this.state.password,onChange:this.changepasswordHandler})]}),Object(h.jsx)("button",{className:"btn btn-success",onClick:this.login,children:" Login "}),Object(h.jsx)("button",{className:"btn btn-success",children:Object(h.jsx)(r.b,{to:"/register",children:"Registrarse"})})]})})]})})})]})}}]),a}(n.Component),x=(a(72),a(26));a(81);x.initializeApp({apiKey:"AIzaSyAKWdDmbPqKqJTZ5wmqtn5OZ22LoCtLTbM",authDomain:"mega-parodia.firebaseapp.com",projectId:"mega-parodia",storageBucket:"mega-parodia.appspot.com",messagingSenderId:"483920467168",appId:"1:483920467168:web:e56750459a4cc53e826c85",measurementId:"G-D6TZD11X7R"});var k=x.storage(),y=x.firestore().collection("/tutorials"),T=new(function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,[{key:"getAll",value:function(){return y}},{key:"create",value:function(e){return y.add(e)}},{key:"update",value:function(e,t){return y.doc(e).update(t)}},{key:"delete",value:function(e){return y.doc(e).delete()}}]),e}()),C=Object(c.f)(function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChangeTitle=n.onChangeTitle.bind(Object(p.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(p.a)(n)),n.saveTutorial=n.saveTutorial.bind(Object(p.a)(n)),n.newTutorial=n.newTutorial.bind(Object(p.a)(n)),n.handleChange=n.handleChange.bind(Object(p.a)(n)),n.handleUpload=n.handleUpload.bind(Object(p.a)(n)),n.state={title:"",description:"",published:!1,submitted:!1,file:"",name:"",fileurl:""},n}return Object(l.a)(a,[{key:"onChangeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"saveTutorial",value:function(){var e=this,t={title:this.state.title,description:this.state.description,published:!1,fileurl:this.state.fileurl};T.create(t).then((function(){console.log("Created new item successfully!"),e.setState({submitted:!0})})).catch((function(e){console.log(e)}))}},{key:"newTutorial",value:function(){this.setState({title:"",description:"",published:!1,submitted:!1})}},{key:"handleChange",value:function(e){alert("e: "+e.target.files[0]),alert("e: "+e.target.files[0].name),this.setState({file:e.target.files[0],name:e.target.files[0].name})}},{key:"handleUpload",value:function(e){var t=this,a=this.state.name;alert("uploading..."+a),e.preventDefault(),k.ref("/images/".concat(this.state.name)).put(this.state.file).on("state_changed",console.log,console.error,(function(){k.ref("images").child(t.state.name).getDownloadURL().then((function(e){t.setState({fileurl:e})}))}))}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"submit-form",children:[Object(h.jsx)(j,{}),this.state.submitted?Object(h.jsxs)("div",{children:[Object(h.jsx)("h4",{children:"You submitted successfully!"}),Object(h.jsx)("button",{className:"btn btn-success",onClick:this.newTutorial,children:"Add"})]}):Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"title",children:"Title"}),Object(h.jsx)("input",{type:"text",className:"form-control",id:"title",required:!0,value:this.state.title,onChange:this.onChangeTitle,name:"title"})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"description",children:"Description"}),Object(h.jsx)("input",{type:"text",className:"form-control",id:"description",required:!0,value:this.state.description,onChange:this.onChangeDescription,name:"description"})]}),Object(h.jsx)("button",{onClick:this.saveTutorial,className:"btn btn-success",children:"Submit"})]}),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsxs)("form",{onSubmit:this.handleUpload,children:[Object(h.jsx)("input",{type:"file",onChange:this.handleChange}),Object(h.jsx)("button",{children:"upload to firebase"})]}),this.state.fileurl,Object(h.jsx)("img",{src:this.state.fileurl,alt:""})]})]})}}]),a}(n.Component)),N=a(21),w=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onChangeTitle=n.onChangeTitle.bind(Object(p.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(p.a)(n)),n.updatePublished=n.updatePublished.bind(Object(p.a)(n)),n.updateTutorial=n.updateTutorial.bind(Object(p.a)(n)),n.deleteTutorial=n.deleteTutorial.bind(Object(p.a)(n)),n.state={currentTutorial:{id:null,title:"",description:"",published:!1,fileurl:""},message:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({currentTutorial:this.props.tutorial})}},{key:"onChangeTitle",value:function(e){var t=e.target.value;this.setState((function(e){return{currentTutorial:Object(N.a)(Object(N.a)({},e.currentTutorial),{},{title:t})}}))}},{key:"onChangeDescription",value:function(e){var t=e.target.value;this.setState((function(e){return{currentTutorial:Object(N.a)(Object(N.a)({},e.currentTutorial),{},{description:t})}}))}},{key:"updatePublished",value:function(e){var t=this;T.update(this.state.currentTutorial.id,{published:e}).then((function(){t.setState((function(t){return{currentTutorial:Object(N.a)(Object(N.a)({},t.currentTutorial),{},{published:e}),message:"The status was updated successfully!"}}))})).catch((function(e){console.log(e)}))}},{key:"updateTutorial",value:function(){var e=this,t={title:this.state.currentTutorial.title,description:this.state.currentTutorial.description};T.update(this.state.currentTutorial.id,t).then((function(){e.setState({message:"The tutorial was updated successfully!"})})).catch((function(e){console.log(e)}))}},{key:"deleteTutorial",value:function(){var e=this;T.delete(this.state.currentTutorial.id).then((function(){e.props.refreshList()})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.currentTutorial;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h4",{children:"Tutorial"}),t?Object(h.jsxs)("div",{className:"edit-form",children:[Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"title",children:"Title"}),Object(h.jsx)("input",{type:"text",className:"form-control",id:"title",value:t.title,onChange:this.onChangeTitle})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"description",children:"Description"}),Object(h.jsx)("input",{type:"text",className:"form-control",id:"description",value:t.description,onChange:this.onChangeDescription})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:"Foto:"}),t.fileurl,Object(h.jsx)("a",{href:t.fileurl,children:" descargar "})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:Object(h.jsx)("strong",{children:"Status:"})}),t.published?"Published":"Pending"]})]}),t.published?Object(h.jsx)("button",{className:"badge badge-primary mr-2",onClick:function(){return e.updatePublished(!1)},children:"UnPublish"}):Object(h.jsx)("button",{className:"badge badge-primary mr-2",onClick:function(){return e.updatePublished(!0)},children:"Publish"}),Object(h.jsx)("button",{className:"badge badge-danger mr-2",onClick:this.deleteTutorial,children:"Delete"}),Object(h.jsx)("button",{type:"submit",className:"badge badge-success",onClick:this.updateTutorial,children:"Update"}),Object(h.jsx)("p",{children:this.state.message})]}):Object(h.jsxs)("div",{children:[Object(h.jsx)("br",{}),Object(h.jsx)("p",{children:"Dale click en archivos para ver "})]})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.tutorial;return t.currentTutorial.id!==a.id?{currentTutorial:a,message:""}:t.currentTutorial}}]),a}(n.Component),S=Object(c.f)(function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).refreshList=n.refreshList.bind(Object(p.a)(n)),n.setActiveTutorial=n.setActiveTutorial.bind(Object(p.a)(n)),n.onDataChange=n.onDataChange.bind(Object(p.a)(n)),n.state={tutorials:[],currentTutorial:null,currentIndex:-1},n.unsubscribe=void 0,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.unsubscribe=T.getAll().orderBy("title","asc").onSnapshot(this.onDataChange)}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var a=e.id,n=e.data();t.push({id:a,title:n.title,description:n.description,published:n.published,fileurl:n.fileurl})})),this.setState({tutorials:t})}},{key:"refreshList",value:function(){this.setState({currentTutorial:null,currentIndex:-1})}},{key:"setActiveTutorial",value:function(e,t){this.setState({currentTutorial:e,currentIndex:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.tutorials,n=t.currentTutorial,s=t.currentIndex;return Object(h.jsxs)("div",{children:[Object(h.jsx)(j,{}),Object(h.jsxs)("div",{className:"list row",children:[Object(h.jsxs)("div",{className:"col-md-6",children:[Object(h.jsx)("h4",{children:"Archivos"}),Object(h.jsx)("ul",{className:"list-group",children:a&&a.map((function(t,a){return Object(h.jsx)("li",{className:"list-group-item "+(a===s?"active":""),onClick:function(){return e.setActiveTutorial(t,a)},children:t.title},a)}))})]}),Object(h.jsx)("div",{className:"col-md-6",children:n?Object(h.jsx)(w,{tutorial:n,refreshList:this.refreshList}):Object(h.jsxs)("div",{children:[Object(h.jsx)("br",{}),Object(h.jsx)("p",{children:"Dale click en archivos para ver "})]})})]})]})}}]),a}(n.Component)),D=new(function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,[{key:"createUsers",value:function(e){return O.a.post("https://mega-parodia.herokuapp.com/api/signup",e)}}]),e}()),U=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).saveUser=function(e){e.preventDefault();var t={name:n.state.usuario,pass:n.state.contrasena,pass_confirm:n.state.confirmacion};console.log("user => "+JSON.stringify(t)),""===n.state.id&&D.createUsers(t).then((function(e){window.location.href="/tutorials"}))},n.changeUsuarioHandler=function(e){n.setState({usuario:e.target.value})},n.changeContrasenaHandler=function(e){n.setState({contrasena:e.target.value})},n.changeConfirmacionHandler=function(e){n.setState({confirmacion:e.target.value})},n.state={id:"",usuario:"",contrasena:"",confirmacion:""},n.changeUsuarioHandler=n.changeUsuarioHandler.bind(Object(p.a)(n)),n.changeContrasenaHandler=n.changeContrasenaHandler.bind(Object(p.a)(n)),n.saveUser=n.saveUser.bind(Object(p.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"cancel",value:function(){}},{key:"getTitle",value:function(){return""===this.state.id?Object(h.jsx)("h3",{className:"text-center",children:"Registrar usuario"}):Object(h.jsx)("h3",{className:"text-center",children:"Update Employee"})}},{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)("br",{}),Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"card col-md-6 offset-md-3 offset-md-3",children:[this.getTitle(),Object(h.jsx)("div",{className:"card-body",children:Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:" Username: "}),Object(h.jsx)("input",{placeholder:"Username",name:"usuario",className:"form-control",value:this.state.usuario,onChange:this.changeUsuarioHandler})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:" Contrasena: "}),Object(h.jsx)("input",{placeholder:"Contrasena",name:"contrasena",className:"form-control",value:this.state.contrasena,onChange:this.changeContrasenaHandler})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:" Repetir contrasena: "}),Object(h.jsx)("input",{placeholder:"Repetir contrasena",name:"confirmacion",className:"form-control",value:this.state.confirmacion,onChange:this.changeConfirmacionHandler})]}),Object(h.jsx)("button",{className:"btn btn-success",onClick:this.saveUser,children:"Save"})]})})]})})})]})}}]),a}(n.Component),I=function(){return Object(h.jsx)(r.a,{children:Object(h.jsxs)(c.c,{children:[Object(h.jsx)(c.a,{exact:!0,path:"/home",children:Object(h.jsx)(m,{})}),Object(h.jsx)(c.a,{exact:!0,path:"/",children:Object(h.jsx)(v,{})}),Object(h.jsx)(c.a,{exact:!0,path:"/tutorials",children:Object(h.jsx)(S,{})}),Object(h.jsx)(c.a,{exact:!0,path:"/add",children:Object(h.jsx)(C,{})}),Object(h.jsx)(c.a,{exact:!0,path:"/register",children:Object(h.jsx)(U,{})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(h.jsx)(r.a,{children:Object(h.jsx)(I,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[82,1,2]]]);
//# sourceMappingURL=main.4537019d.chunk.js.map